# 《两周自制脚本语言》
## 第1天 来，我们一起做些什么吧
介绍了编译器解析器的区别。

## 第2天 设计程序设计语言
定了一些基础语法。

## 第3天 分割单词
这里用的是正则表达式来分割的单词，<br>
但他把不同的token的正则都放到一起了，显得比较杂乱。<br>
放在一起，然后通过正则的（）功能进行分类提取。<br>
同时提取的过程中会在token类里面保存一些相关的元数据：行号等。<br>
值得注意的是，字符串的token在保存内容的时候，对其进行了操作，让它支持了转义。

## 第4天 用于表示程序的对象
这一章设计了ast（抽象语法树）的数据结构<br>
然后介绍了BNF范式<br>
这里提到了BNF范式的两个特性：
* 可以递归
* 可以通过增加层级来隐含运算优先级

## 第5天 设计语法分析器
主要是用了一个自己写的库来吧BNF转换成为了ast转换器。<br>
库的实现方法要在第17章才会说<br>
另外还有一个对操作符的结合方向做的设置，这个原理也是不明。<br>
还有一个由于设计的语言的的语句可以省略;号，所以在终结符的配置里面可以配置遇到`\n};`这些符号时会截断单词。<br>


## 第6天 通过解释器执行程序
每一个抽象树节点都递归执行eval，最终可以得到一整个树的结果。<br>
值得注意的点是，对赋值语句做了特殊处理，eval函数执行时需要传入一个上下文对象，赋值语句要修改上下文。


## 第7天 添加函数功能

添加了函数功能，和前面的过程差不多。<br>
定义函数就是在上下文上加一个键值对把函数的ast存起来。<br>
由于有一个作用域的问题，所以会在每次执行函数时会生成一个新的作用域，并连接到旧作用域上。<br>
因为定义函数的时候把对应的上下文对象都一起包到函数对象里面了，所以实现闭包很简单。


## 第8天 关联Java语言
简单来说就是在根上下文中注入java的方法，判断是否java函数，然后用反射执行


## 第9天 设计面向对象语言
最主要实现了xx.xx,xx.new这些语法，所谓的类和js很像就是一个构造函数。<br>
xx.new操作其实就是new了一个上线文对象给这个构造函数执行。<br>
