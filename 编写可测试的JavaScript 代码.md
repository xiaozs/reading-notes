# 《编写可测试的JavaScript代码》
## 第1章 可测试的JavaScript

||为什么|是什么|如何|
|---|---|---|---|
|可测试|测试这件事始终要有人做|容易被测试|边写代码边写测试|
|可维护|不用担心越改越错|修改了不会引起其它错|短小|
|可理解|为了上面2点|短小|还是短小|



## 第2章 复杂度
可以让函数保持最小代码量的一个方法是
让命令（Command）和查询（Query）保持分离。
命令函数表示做什么（do something），
而查询函数则表示返回什么（return something）


```
介绍了圈复杂度相关知识：
```
生成代码的**圈复杂度**可以使用像jsmeter、Jscheckstyle这样简单的命令行工具

|圈复杂度|修改出错概率|
|:---:|:---:|
|1-10|5%|
|20-30|20%|
|>50|40%|
|>100|60%|


```
扇入、扇出：
```
1. 高扇入和扇出的代码，可能表示一个函数正在尝试做太多事情，应该避免
2. 高扇入和扇出，可以判定出系统的压力点（stress points），维护这些函数将会非常困难，因为它们关联太多的系统其他部分
3. 它们不够精细（inadequate refinement），这意味着函数需要重构，因为它太大且要做的事情太多，或者缺少抽象层才导致该函数的高扇入和高扇出。

```
有一段对于耦合与依赖注入的讨论：

1. 通常来说依赖注入要使用工厂或手动生成对象来进行注入
2. 这就相当于把皮球从一个地方踢到了另一个地方
   （从对象内部耦合生成 -> 工厂、手动）
3. 这有什么不同呢？
   这允许我们随意换一个不同的皮球，
   而这个动作通常是在程序启动时发生。
4. 而皮球可以换成mock有利于我们测试。
```